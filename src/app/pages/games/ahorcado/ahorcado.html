
<section class="container">
  <a routerLink="/games" class="btn ghost" style="margin-bottom:12px;">← Volver</a>

  <div class="card">
    <h2 class="h1">Ahorcado</h2>

    <!-- HUD -->
    <div class="hud" style="display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin:8px 0 16px;">
      <div class="hud-box" style="background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:10px;text-align:center;">
        <div class="hud-label" style="font-size:12px;opacity:.8;">Intentos</div>
        <div class="hud-value" style="font-size:20px;font-weight:700;">{{ errors() }} / 6</div>
        <div class="hud-bar" style="height:6px;background:rgba(255,255,255,.08);border-radius:999px;overflow:hidden;margin-top:8px;">
          <div class="hud-bar-fill" [style.width.%]="(errors()/6)*100" style="height:100%;background:linear-gradient(90deg,#8a73ff,#78e0ff);"></div>
        </div>
      </div>

      <div class="hud-box" style="background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:10px;text-align:center;">
        <div class="hud-label" style="font-size:12px;opacity:.8;">Aciertos</div>
        <div class="hud-value" style="font-size:20px;font-weight:700;">{{ corrects() }}</div>
      </div>

      <div class="hud-box" style="background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:10px;text-align:center;">
        <div class="hud-label" style="font-size:12px;opacity:.8;">Puntos</div>
        <div class="hud-value" style="font-size:20px;font-weight:700;">{{ points() }}</div>
      </div>

      <div class="hud-box" style="background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:10px;text-align:center;">
        <div class="hud-label" style="font-size:12px;opacity:.8;">Tiempo</div>
        <div class="hud-value" style="font-size:20px;font-weight:700;">{{ elapsedSec() }} s</div>
      </div>
    </div>

    <p class="p">Adiviná la palabra. Tenés {{ attemptsLeft() }} intentos.</p>

    <!-- Dibujo progresivo -->
    <div class="hangman-wrap">
      <svg viewBox="0 0 160 200" class="hangman">
        <!-- base y horca -->
        <line x1="10"  y1="190" x2="150" y2="190" class="gallow"/>
        <line x1="35"  y1="190" x2="35"  y2="20"  class="gallow"/>
        <line x1="35"  y1="20"  x2="110" y2="20"  class="gallow"/>
        <line x1="110" y1="20"  x2="110" y2="40"  class="gallow"/>

        <!-- partes del cuerpo: se muestran según errores -->
        @if (errors() >= 1) { <circle cx="110" cy="55" r="15" class="man"/> }           <!-- cabeza -->
        @if (errors() >= 2) { <line x1="110" y1="70" x2="110" y2="115" class="man"/> }  <!-- torso -->
        @if (errors() >= 3) { <line x1="110" y1="80" x2="92"  y2="98"  class="man"/> }  <!-- brazo izq -->
        @if (errors() >= 4) { <line x1="110" y1="80" x2="128" y2="98"  class="man"/> }  <!-- brazo der -->
        @if (errors() >= 5) { <line x1="110" y1="115" x2="95"  y2="145" class="man"/> } <!-- pierna izq -->
        @if (errors() >= 6) { <line x1="110" y1="115" x2="125" y2="145" class="man"/> } <!-- pierna der -->
      </svg>
    </div>

    <div class="word">{{ masked() }}</div>

    @if (status() === 'playing') {
      <div class="keys">
        @for (l of alphabet; track l) {
          <button class="key" [disabled]="isGuessed(l)" (click)="guess(l)">{{ l }}</button>
        }
      </div>
    } @else if (status() === 'won') {
      <div class="result ok">¡Ganaste! 🎉</div>
      <button class="btn primary" (click)="reset()">Jugar otra</button>
    } @else {
      <div class="result bad">Perdiste  — La palabra era <b>{{ word() }}</b></div>
      <button class="btn primary" (click)="reset()">Reintentar</button>
    }
  </div>
</section>
