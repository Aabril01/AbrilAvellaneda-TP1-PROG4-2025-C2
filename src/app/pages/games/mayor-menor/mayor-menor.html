<section class="wrap">
  <a routerLink="/games" class="back">← Volver</a>

  <article class="card">
    <h2 class="title">{{ titulo }}</h2>

    <!-- HUD -->
    <div class="hud">
      <div class="hud-box">
        <div class="hud-label">Intentos</div>
        <div class="hud-value">{{ ronda() }} / {{ RONDAS_MAX }}</div>
        <div class="hud-bar">
          <div class="hud-bar-fill" [style.width.%]="(ronda()/RONDAS_MAX)*100"></div>
        </div>
      </div>

      <div class="hud-box">
        <div class="hud-label">Aciertos</div>
        <div class="hud-value">{{ aciertos() }}</div>
      </div>

      <div class="hud-box">
        <div class="hud-label">Puntos</div>
        <div class="hud-value">{{ puntos() }}</div>
      </div>

      <div class="hud-box">
        <div class="hud-label">Tiempo</div>
        <div class="hud-value">{{ elapsedSec() | number:'1.0-0' }} s</div>
      </div>
    </div>

    <ng-container *ngIf="!fin(); else finTpl">
      <div class="board">
        <div class="slot">
          <img [src]="izq().img" alt="izquierda">
          <figcaption>Izquierda</figcaption>
        </div>

        <div class="slot">
          <div class="card-back"></div>
          <figcaption>Derecha (oculta)</figcaption>
        </div>
      </div>

      <div class="actions">
        <button (click)="elegir('menor')" class="btn">Menor</button>
        <button (click)="elegir('mayor')" class="btn primary">Mayor</button>
      </div>
    </ng-container>

    <ng-template #finTpl>
      <div class="finish">
        <h3>¡Fin del juego!</h3>
        <p>Puntaje: <b>{{ puntos() }}</b> — Aciertos: <b>{{ aciertos() }}</b> — Tiempo: <b>{{ elapsedSec() }}s</b></p>
        <div class="actions">
          <button class="btn" (click)="retry()">Jugar de nuevo</button>
          <a class="btn ghost" routerLink="/results">Ver resultados</a>
        </div>
      </div>
    </ng-template>
  </article>
</section>
